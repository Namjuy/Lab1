<app-toast></app-toast>
<app-home-filter (handleSearch)="handleSearch($event)"></app-home-filter>
<div class="form-create">
  <button
    class="btn btn-primary"
    data-bs-toggle="modal"
    data-bs-target="#exampleModal"
    (click)="createUser()"
  >
    Tạo người dùng
  </button>
</div>
<div class="table-container">
  <table class="table table-hover mt-4 mb-0">
    <thead class="table__head">
      <th>STT</th>
      <th>Chọn</th>
      <th>Tên Công Ty</th>
      <th>Đăng nhập</th>
      <th>Tài khoản</th>
      <th>Họ và tên</th>
      <th>Mã NV</th>
      <th>Kiểu tài khoản</th>
      <th>Ngày đăng nhập gần đây</th>
      <th>Thông tin đăng nhập</th>
      <th>Gắn xe</th>
      <th>Phân quyền</th>
      <th>Sao chép quyền</th>
      <th>Khoá</th>
      <th>Đổi mật khẩu</th>
      <th>Chỉnh sửa thông tin</th>
      <th>Mở khoá đăng nhập</th>
      <th>Xoá</th>
    </thead>
    <tbody class="table__body">
      <tr *ngFor="let item of userList; let i = index" class="table__row">
        <td>{{ (currentPage - 1) * itemsPerPage + i + 1 }}</td>
        <td>
          <input
            class="form-check-input"
            type="checkbox"
            [value]="item.isSelected"
            id="flexCheckDefault"
            [checked]="item.isSelected"
            [(ngModel)]="item.isSelected"
            name="selectedUser?.[item.type]'"
            ngDefaultControl
          />
        </td>
        <td><i class="bi bi-box-arrow-in-right"></i></td>
        <td>
          <i
            [class.bi-person-fill--blue]="item.isLog"
            [class.bi-person-fill]="!item.isLog"
          ></i>
        </td>
        <td [ngClass]="{ red: item.isDeleted }">{{ item.userName }}</td>
        <td class="text-start">{{ item.fullName }}</td>
        <td>{{ item.userId }}</td>
        <td>Admin</td>
        <td>{{ item.lastModifyDate }}</td>
        <td>Bình Anh | Samsung</td>
        <td><i class="bi bi-car-front-fill"></i></td>
        <td><i class="bi bi-key-fill"></i></td>
        <td><i class="bi bi-copy"></i></td>
        <td>
          <ng-container *ngIf="item.isLog; else locked">
            <i class="bi bi-unlock-fill"></i>
          </ng-container>
          <ng-template #locked>
            <i class="bi bi-lock-fill"></i>
          </ng-template>
        </td>
        <td>
          <i
            class="bi bi-person-lock"
            data-bs-toggle="modal"
            data-bs-target="#changePasswordModal"
            (click)="getSelectedUser(item)"
          ></i>
        </td>
        <td>
          <i
            data-bs-toggle="modal"
            data-bs-target="#exampleModal"
            class="bi bi-wrench"
            (click)="getSelectedUser(item)"
          ></i>
        </td>
        <td><i class="bi bi-arrow-repeat"></i></td>
        <td data-bs-toggle="modal" data-bs-target="#confirmDelete" (click)="getDeleteUser(item)">
          <i class="bi bi-trash"></i>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<app-pagination
  (currentPage)="handleCurrentPage($event)"
  (itemsPerPageNumber)="handleItemPerPage($event)"
  [totalPage]="totalPage"
  [indexFirstItem]="indexOfFirstItem"
  [indexLastItem]="indexOfLastItem"
  [totalRow]="totalRow"
></app-pagination>

<app-user-modal
  [selectedUser]="selectedUser"
  [isCreateCheck]="isCreateCheck"
></app-user-modal>

<app-change-password-modal
  [selectedUser]="selectedUser"
></app-change-password-modal>

<app-confirm-dialog
  [deleteUser]="handleDeleteUser"
  [getUser]="getUser"
></app-confirm-dialog>
